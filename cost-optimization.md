# ğŸ’° AWSã‚³ã‚¹ãƒˆæœ€é©åŒ–ã‚¬ã‚¤ãƒ‰

## ğŸ¯ ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®æˆ¦ç•¥

### 1. ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æ´»ç”¨

#### 1å¹´å¥‘ç´„ï¼ˆæ¨å¥¨ï¼‰
```bash
# ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®è³¼å…¥
aws ec2 purchase-reserved-instances-offering \
    --reserved-instances-offering-id [OFFERING_ID] \
    --instance-count 1
```

**å‰²å¼•ç‡**: ç´„40%
**æœˆé¡ã‚³ã‚¹ãƒˆ**: $8.47 â†’ $5.08

#### 3å¹´å¥‘ç´„ï¼ˆé•·æœŸé‹ç”¨ï¼‰
**å‰²å¼•ç‡**: ç´„60%
**æœˆé¡ã‚³ã‚¹ãƒˆ**: $8.47 â†’ $3.39

### 2. è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã®è¨­å®š

#### Elastic Beanstalkè¨­å®š
```yaml
# .ebextensions/02_autoscaling.config
option_settings:
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 3
  aws:autoscaling:trigger:
    BreachDuration: 5
    LowerBreachScaleIncrement: -1
    UpperBreachScaleIncrement: 1
    LowerThreshold: 20
    UpperThreshold: 80
```

### 3. ä½¿ç”¨æ™‚é–“ã®æœ€é©åŒ–

#### é–‹ç™ºç’°å¢ƒã®è‡ªå‹•åœæ­¢
```bash
# å¤œé–“è‡ªå‹•åœæ­¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
aws autoscaling set-desired-capacity \
    --auto-scaling-group-name [ASG_NAME] \
    --desired-capacity 0 \
    --honor-cooldown
```

#### ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
- **å¹³æ—¥**: 9:00-18:00 ç¨¼åƒ
- **å¤œé–“**: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åœæ­¢
- **ä¼‘æ—¥**: å¿…è¦æ™‚ã®ã¿èµ·å‹•

### 4. ãƒ‡ãƒ¼ã‚¿è»¢é€ã®æœ€é©åŒ–

#### CloudFrontã®æ´»ç”¨
```yaml
# .ebextensions/03_cloudfront.config
option_settings:
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: /static
    /images: /images
    /css: /css
    /js: /js
```

**åŠ¹æœ**: ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚³ã‚¹ãƒˆã‚’æœ€å¤§50%å‰Šæ¸›

### 5. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®æœ€é©åŒ–

#### EBSæœ€é©åŒ–
- **gp3**: æœ€æ–°ã®æ±ç”¨SSDï¼ˆæ¨å¥¨ï¼‰
- **io1**: é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆå¿…è¦æ™‚ã®ã¿ï¼‰
- **å‰Šé™¤**: ä½¿ç”¨ã—ã¦ã„ãªã„ãƒœãƒªãƒ¥ãƒ¼ãƒ 

## ğŸ“Š æœˆé¡ã‚³ã‚¹ãƒˆæ¯”è¼ƒè¡¨

| æ§‹æˆ | é€šå¸¸æ–™é‡‘ | ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰1å¹´ | ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰3å¹´ | ã‚¹ãƒãƒƒãƒˆ |
|------|----------|---------------|---------------|----------|
| t3.micro | $25-30 | $15-18 | $10-12 | $2-5 |
| t3.small | $35-40 | $21-24 | $14-16 | $3-8 |
| t3.medium | $50-55 | $30-33 | $20-22 | $5-10 |

## ğŸ¯ æ¨å¥¨æ§‹æˆ

### å€‹äººåˆ©ç”¨ãƒ»å­¦ç¿’ç›®çš„
```
æ§‹æˆ: t3.micro + ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰1å¹´å¥‘ç´„
æœˆé¡: $15-18 (ç´„2,100-2,500å††)
å¹´é–“: $180-216 (ç´„25,200-30,240å††)
```

### å°è¦æ¨¡ãƒ“ã‚¸ãƒã‚¹
```
æ§‹æˆ: t3.small + ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰1å¹´å¥‘ç´„
æœˆé¡: $21-24 (ç´„2,900-3,400å††)
å¹´é–“: $252-288 (ç´„35,280-40,320å††)
```

### ä¸­è¦æ¨¡ã‚µãƒ¼ãƒ“ã‚¹
```
æ§‹æˆ: t3.medium + ãƒªã‚¶ãƒ¼ãƒ–ãƒ‰1å¹´å¥‘ç´„ + CloudFront
æœˆé¡: $30-35 (ç´„4,200-4,900å††)
å¹´é–“: $360-420 (ç´„50,400-58,800å††)
```

## ğŸš¨ ã‚³ã‚¹ãƒˆç›£è¦–

### CloudWatch Billing
```bash
# ã‚³ã‚¹ãƒˆã‚¢ãƒ©ãƒ¼ãƒˆã®è¨­å®š
aws cloudwatch put-metric-alarm \
    --alarm-name "MonthlyCost" \
    --alarm-description "æœˆé¡ã‚³ã‚¹ãƒˆç›£è¦–" \
    --metric-name EstimatedCharges \
    --namespace AWS/Billing \
    --statistic Maximum \
    --period 86400 \
    --threshold 30 \
    --comparison-operator GreaterThanThreshold
```

### ã‚³ã‚¹ãƒˆåˆ†æãƒ„ãƒ¼ãƒ«
- **AWS Cost Explorer**: è©³ç´°ãªã‚³ã‚¹ãƒˆåˆ†æ
- **AWS Budgets**: äºˆç®—è¨­å®šã¨ã‚¢ãƒ©ãƒ¼ãƒˆ
- **AWS Trusted Advisor**: ã‚³ã‚¹ãƒˆæœ€é©åŒ–ææ¡ˆ

## ğŸ’¡ å®Ÿè·µçš„ãªã‚³ã‚¹ãƒˆå‰Šæ¸›Tips

### 1. é–‹ç™ºç’°å¢ƒã®åˆ†é›¢
```
æœ¬ç•ªç’°å¢ƒ: t3.small (å¸¸æ™‚ç¨¼åƒ)
é–‹ç™ºç’°å¢ƒ: t3.micro (ã‚¹ãƒãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹)
ãƒ†ã‚¹ãƒˆç’°å¢ƒ: å¿…è¦æ™‚ã®ã¿èµ·å‹•
```

### 2. ãƒªã‚½ãƒ¼ã‚¹ã®å®šæœŸãƒã‚§ãƒƒã‚¯
```bash
# æœªä½¿ç”¨ãƒªã‚½ãƒ¼ã‚¹ã®ç¢ºèª
aws ec2 describe-instances --filters "Name=state-name,Values=stopped"
aws ec2 describe-volumes --filters "Name=status,Values=available"
```

### 3. ã‚¿ã‚°ä»˜ã‘ã«ã‚ˆã‚‹ç®¡ç†
```bash
# ã‚³ã‚¹ãƒˆé…åˆ†ã®ãŸã‚ã®ã‚¿ã‚°ä»˜ã‘
aws ec2 create-tags \
    --resources i-1234567890abcdef0 \
    --tags Key=Environment,Value=Production Key=Project,Value=AozoraBookSelector
```

## ğŸ“ˆ ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥

### æ®µéšçš„ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—
1. **é–‹å§‹æ™‚**: t3.micro
2. **ã‚¢ã‚¯ã‚»ã‚¹å¢—åŠ **: t3.small
3. **æœ¬æ ¼é‹ç”¨**: t3.medium
4. **é«˜è² è·**: t3.large + è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

### è² è·ãƒ†ã‚¹ãƒˆ
```bash
# Apache Bench ã§ã®è² è·ãƒ†ã‚¹ãƒˆ
ab -n 1000 -c 10 http://your-app-url/
```

## ğŸ‰ ã¾ã¨ã‚

**æœ€é©åŒ–å¾Œã®æœˆé¡ã‚³ã‚¹ãƒˆ:**
- **å€‹äººåˆ©ç”¨**: $15-18 (ç´„2,100-2,500å††)
- **å°è¦æ¨¡ãƒ“ã‚¸ãƒã‚¹**: $21-24 (ç´„2,900-3,400å††)
- **ä¸­è¦æ¨¡ã‚µãƒ¼ãƒ“ã‚¹**: $30-35 (ç´„4,200-4,900å††)

**å¹´é–“ã‚³ã‚¹ãƒˆ:**
- **å€‹äººåˆ©ç”¨**: $180-216 (ç´„25,200-30,240å††)
- **å°è¦æ¨¡ãƒ“ã‚¸ãƒã‚¹**: $252-288 (ç´„35,280-40,320å††)
- **ä¸­è¦æ¨¡ã‚µãƒ¼ãƒ“ã‚¹**: $360-420 (ç´„50,400-58,800å††)

---

**é©åˆ‡ãªæœ€é©åŒ–ã«ã‚ˆã‚Šã€ã‚³ã‚¹ãƒˆã‚’æœ€å¤§60%å‰Šæ¸›å¯èƒ½ã§ã™ï¼** ğŸ’°âœ¨ 